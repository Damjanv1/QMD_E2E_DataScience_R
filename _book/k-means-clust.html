<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Rene Essomba">
<title>End To End Data Science With R - 14&nbsp; K-Mean Clustering</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./hier-clust.html" rel="next">
<link href="./basic-unsupervised-learning.html" rel="prev">
<link href="./cover.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script defer="" data-domain="e2e-ds-r.franckess.com" src="https://plausible.io/js/plausible.js"></script><link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="site_libs/plotly-binding-4.10.4/plotly.js"></script><script src="site_libs/typedarray-0.1/typedarray.min.js"></script><script src="site_libs/jquery-3.5.1/jquery.min.js"></script><link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script><link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./basic-unsupervised-learning.html">unsupervised-learn.qmd</a></li><li class="breadcrumb-item"><a href="./k-means-clust.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">K-Mean Clustering</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">End To End Data Science With R</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://www.github.com/franckess/QMD_E2E_DataScience_R" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Data Science Universe</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Science and R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./understanding-ds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Understanding Data Science As a Career</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./understanding-r-applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Understanding R Applications in Data Science</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-objects-and-variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Objects And Variables</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./data-exploration-vis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Exploration And Visualisation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic-stats-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Basics Of Statistics Using R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-manipulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Manipulation Using R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./feature-eng.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Feature Engineering for Tabular Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handling-data-issues.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Handling Data Issues</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-visualisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Data Visualisation Using <code>ggplot2</code></span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./supervised-learning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Supervised Learning</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic-supervised-learning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Basics of Supervised Learning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linear-reg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Linear Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./k-nearest-neighbour-reg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">K-Nearest Neighbour Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./class-log-reg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Classification Using Logistic Model</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">unsupervised-learn.qmd</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic-unsupervised-learning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Basics Of Unsupervised Learning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./k-means-clust.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">K-Mean Clustering</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hier-clust.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Hierarchical Clustering</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pca.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Principal Component Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./t-sne.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">t-Distributed Stochastic Neighbor Embedding</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./other-topic-ds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Other Topics in Data Science</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Basics of time series</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./svm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Support Vector Machine</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./semi-sup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Tree-based Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics-nn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Basics of Neural Network</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./nlp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Natural Language Processing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics-nlp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Basics of NLP</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./understanding-nlp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Understand a simple NLP model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./apply-nlp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Apply NLP Techniques to Real World Data</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./img-proc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Image Processing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro-img-proc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Introduction to image processing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./img-seg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Image segmentation and object detection</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#principles-of-k-mean-clustering" id="toc-principles-of-k-mean-clustering" class="nav-link active" data-scroll-target="#principles-of-k-mean-clustering"><span class="header-section-number">14.1</span> Principles of K-Mean Clustering</a></li>
  <li><a href="#model-selection" id="toc-model-selection" class="nav-link" data-scroll-target="#model-selection"><span class="header-section-number">15</span> Model selection</a></li>
  <li><a href="#how-to-determine-the-number-of-clusters" id="toc-how-to-determine-the-number-of-clusters" class="nav-link" data-scroll-target="#how-to-determine-the-number-of-clusters"><span class="header-section-number">16</span> How to determine the number of clusters</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://www.github.com/franckess/QMD_E2E_DataScience_R/edit/main/k-means-clust.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://www.github.com/franckess/QMD_E2E_DataScience_R/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./basic-unsupervised-learning.html">unsupervised-learn.qmd</a></li><li class="breadcrumb-item"><a href="./k-means-clust.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">K-Mean Clustering</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-k-mean-clust" class="quarto-section-identifier"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">K-Mean Clustering</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="principles-of-k-mean-clustering" class="level2" data-number="14.1"><h2 data-number="14.1" class="anchored" data-anchor-id="principles-of-k-mean-clustering">
<span class="header-section-number">14.1</span> Principles of K-Mean Clustering</h2>
<p><strong>K-mean clustering</strong> is a popular unsupervised learning algorithm used to group similar data points together into a fixed number of clusters. It is a centroid-based algorithm, which means that it assigns data points to clusters based on their proximity to a central point called the centroid. In R, the K-Means algorithm can be implemented using the following code:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Load iris dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract relevant columns for clustering</span></span>
<span><span class="va">iris_data</span> <span class="op">&lt;-</span> <span class="va">iris</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span></span>
<span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/kmeans.html">kmeans</a></span><span class="op">(</span><span class="va">iris_data</span>, centers <span class="op">=</span> <span class="fl">3</span>, nstart <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; K-means clustering with 3 clusters of sizes 50, 62, 38</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Cluster means:</span></span>
<span><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width</span></span>
<span><span class="co">#&gt; 1     5.006000    3.428000     1.462000    0.246000</span></span>
<span><span class="co">#&gt; 2     5.901613    2.748387     4.393548    1.433871</span></span>
<span><span class="co">#&gt; 3     6.850000    3.073684     5.742105    2.071053</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Clustering vector:</span></span>
<span><span class="co">#&gt;   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span></span>
<span><span class="co">#&gt;  [37] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span><span class="co">#&gt;  [73] 2 2 2 2 2 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 2 3 3 3 3 2 3</span></span>
<span><span class="co">#&gt; [109] 3 3 3 3 3 2 2 3 3 3 3 2 3 2 3 2 3 3 2 2 3 3 3 3 3 2 3 3 3 3 2 3 3 3 2 3</span></span>
<span><span class="co">#&gt; [145] 3 3 2 3 3 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Within cluster sum of squares by cluster:</span></span>
<span><span class="co">#&gt; [1] 15.15100 39.82097 23.87947</span></span>
<span><span class="co">#&gt;  (between_SS / total_SS =  88.4 %)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Available components:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [1] "cluster"      "centers"      "totss"        "withinss"    </span></span>
<span><span class="co">#&gt; [5] "tot.withinss" "betweenss"    "size"         "iter"        </span></span>
<span><span class="co">#&gt; [9] "ifault"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here, the parameters are as follows: - <code>x</code>: A numeric data matrix containing the observations - <code>centers</code>: The predefined number of clusters, k - <code>nstart</code>: The number of times the K-Means algorithm is repeated to enhance the resulting model, as it has a random component</p>
<p>To learn about k-means, let’s use the iris dataset with the sepal and petal length variables only (to facilitate visualisation).</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com">plotly</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'plotly'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:ggplot2':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     last_plot</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:graphics':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     layout</span></span>
<span></span>
<span><span class="co"># Perform K-Means clustering with 3 clusters</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">kmeans_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/kmeans.html">kmeans</a></span><span class="op">(</span><span class="va">iris_data</span>, centers <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize the clusters</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">iris</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">Petal.Length</span>, <span class="va">Petal.Width</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">kmeans_result</span><span class="op">$</span><span class="va">cluster</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"K-Means Clustering of Iris Dataset"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Petal Length"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Petal Width"</span>,</span>
<span>       color <span class="op">=</span> <span class="st">"Cluster"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-2ae4f30d7598595affc4" style="width:100%;height:433px;"></div>
<script type="application/json" data-for="htmlwidget-2ae4f30d7598595affc4">{"x":{"data":[{"x":[1.3999999999999999,1.3999999999999999,1.3,1.5,1.3999999999999999,1.7,1.3999999999999999,1.5,1.3999999999999999,1.5,1.5,1.6000000000000001,1.3999999999999999,1.1000000000000001,1.2,1.5,1.3,1.3999999999999999,1.7,1.5,1.7,1.5,1,1.7,1.8999999999999999,1.6000000000000001,1.6000000000000001,1.5,1.3999999999999999,1.6000000000000001,1.6000000000000001,1.5,1.5,1.3999999999999999,1.5,1.2,1.3,1.3999999999999999,1.3,1.5,1.3,1.3,1.3,1.6000000000000001,1.8999999999999999,1.3999999999999999,1.6000000000000001,1.3999999999999999,1.5,1.3999999999999999],"y":[0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.40000000000000002,0.29999999999999999,0.20000000000000001,0.20000000000000001,0.10000000000000001,0.20000000000000001,0.20000000000000001,0.10000000000000001,0.10000000000000001,0.20000000000000001,0.40000000000000002,0.40000000000000002,0.29999999999999999,0.29999999999999999,0.29999999999999999,0.20000000000000001,0.40000000000000002,0.20000000000000001,0.5,0.20000000000000001,0.20000000000000001,0.40000000000000002,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.40000000000000002,0.10000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.10000000000000001,0.20000000000000001,0.20000000000000001,0.29999999999999999,0.29999999999999999,0.20000000000000001,0.59999999999999998,0.40000000000000002,0.29999999999999999,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001],"text":["Petal.Length: 1.4<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.4<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.3<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.4<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.7<br />Petal.Width: 0.4<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.4<br />Petal.Width: 0.3<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.4<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.1<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.6<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.4<br />Petal.Width: 0.1<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.1<br />Petal.Width: 0.1<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.2<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.4<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.3<br />Petal.Width: 0.4<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.4<br />Petal.Width: 0.3<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.7<br />Petal.Width: 0.3<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.3<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.7<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.4<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.0<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.7<br />Petal.Width: 0.5<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.9<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.6<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.6<br />Petal.Width: 0.4<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.4<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.6<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.6<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.4<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.1<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.4<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.2<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.3<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.4<br />Petal.Width: 0.1<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.3<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.3<br />Petal.Width: 0.3<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.3<br />Petal.Width: 0.3<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.3<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.6<br />Petal.Width: 0.6<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.9<br />Petal.Width: 0.4<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.4<br />Petal.Width: 0.3<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.6<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.4<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.5<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1","Petal.Length: 1.4<br />Petal.Width: 0.2<br />factor(kmeans_result$cluster): 1"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"1","legendgroup":"1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4.7000000000000002,4.5,4,4.5999999999999996,4.5,4.7000000000000002,3.2999999999999998,4.5999999999999996,3.8999999999999999,3.5,4.2000000000000002,4,4.7000000000000002,3.6000000000000001,4.4000000000000004,4.5,4.0999999999999996,4.5,3.8999999999999999,4.7999999999999998,4,4.9000000000000004,4.7000000000000002,4.2999999999999998,4.4000000000000004,4.7999999999999998,4.5,3.5,3.7999999999999998,3.7000000000000002,3.8999999999999999,5.0999999999999996,4.5,4.5,4.7000000000000002,4.4000000000000004,4.0999999999999996,4,4.4000000000000004,4.5999999999999996,4,3.2999999999999998,4.2000000000000002,4.2000000000000002,4.2000000000000002,4.2999999999999998,3,4.0999999999999996,5.0999999999999996,4.5,5,5.0999999999999996,5,4.9000000000000004,4.9000000000000004,4.7999999999999998,4.9000000000000004,5.0999999999999996,4.7999999999999998,5.0999999999999996,5,5.0999999999999996],"y":[1.3999999999999999,1.5,1.3,1.5,1.3,1.6000000000000001,1,1.3,1.3999999999999999,1,1.5,1,1.3999999999999999,1.3,1.3999999999999999,1.5,1,1.5,1.1000000000000001,1.8,1.3,1.5,1.2,1.3,1.3999999999999999,1.3999999999999999,1.5,1,1.1000000000000001,1,1.2,1.6000000000000001,1.5,1.6000000000000001,1.5,1.3,1.3,1.3,1.2,1.3999999999999999,1.2,1,1.3,1.2,1.3,1.3,1.1000000000000001,1.3,1.8999999999999999,1.7,2,2.3999999999999999,1.5,2,1.8,1.8,1.8,1.5,1.8,1.8999999999999999,1.8999999999999999,1.8],"text":["Petal.Length: 4.7<br />Petal.Width: 1.4<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.5<br />Petal.Width: 1.5<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.0<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.6<br />Petal.Width: 1.5<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.5<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.7<br />Petal.Width: 1.6<br />factor(kmeans_result$cluster): 2","Petal.Length: 3.3<br />Petal.Width: 1.0<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.6<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 3.9<br />Petal.Width: 1.4<br />factor(kmeans_result$cluster): 2","Petal.Length: 3.5<br />Petal.Width: 1.0<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.2<br />Petal.Width: 1.5<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.0<br />Petal.Width: 1.0<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.7<br />Petal.Width: 1.4<br />factor(kmeans_result$cluster): 2","Petal.Length: 3.6<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.4<br />Petal.Width: 1.4<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.5<br />Petal.Width: 1.5<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.1<br />Petal.Width: 1.0<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.5<br />Petal.Width: 1.5<br />factor(kmeans_result$cluster): 2","Petal.Length: 3.9<br />Petal.Width: 1.1<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.8<br />Petal.Width: 1.8<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.0<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.9<br />Petal.Width: 1.5<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.7<br />Petal.Width: 1.2<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.3<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.4<br />Petal.Width: 1.4<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.8<br />Petal.Width: 1.4<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.5<br />Petal.Width: 1.5<br />factor(kmeans_result$cluster): 2","Petal.Length: 3.5<br />Petal.Width: 1.0<br />factor(kmeans_result$cluster): 2","Petal.Length: 3.8<br />Petal.Width: 1.1<br />factor(kmeans_result$cluster): 2","Petal.Length: 3.7<br />Petal.Width: 1.0<br />factor(kmeans_result$cluster): 2","Petal.Length: 3.9<br />Petal.Width: 1.2<br />factor(kmeans_result$cluster): 2","Petal.Length: 5.1<br />Petal.Width: 1.6<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.5<br />Petal.Width: 1.5<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.5<br />Petal.Width: 1.6<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.7<br />Petal.Width: 1.5<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.4<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.1<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.0<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.4<br />Petal.Width: 1.2<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.6<br />Petal.Width: 1.4<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.0<br />Petal.Width: 1.2<br />factor(kmeans_result$cluster): 2","Petal.Length: 3.3<br />Petal.Width: 1.0<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.2<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.2<br />Petal.Width: 1.2<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.2<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.3<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 3.0<br />Petal.Width: 1.1<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.1<br />Petal.Width: 1.3<br />factor(kmeans_result$cluster): 2","Petal.Length: 5.1<br />Petal.Width: 1.9<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.5<br />Petal.Width: 1.7<br />factor(kmeans_result$cluster): 2","Petal.Length: 5.0<br />Petal.Width: 2.0<br />factor(kmeans_result$cluster): 2","Petal.Length: 5.1<br />Petal.Width: 2.4<br />factor(kmeans_result$cluster): 2","Petal.Length: 5.0<br />Petal.Width: 1.5<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.9<br />Petal.Width: 2.0<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.9<br />Petal.Width: 1.8<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.8<br />Petal.Width: 1.8<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.9<br />Petal.Width: 1.8<br />factor(kmeans_result$cluster): 2","Petal.Length: 5.1<br />Petal.Width: 1.5<br />factor(kmeans_result$cluster): 2","Petal.Length: 4.8<br />Petal.Width: 1.8<br />factor(kmeans_result$cluster): 2","Petal.Length: 5.1<br />Petal.Width: 1.9<br />factor(kmeans_result$cluster): 2","Petal.Length: 5.0<br />Petal.Width: 1.9<br />factor(kmeans_result$cluster): 2","Petal.Length: 5.1<br />Petal.Width: 1.8<br />factor(kmeans_result$cluster): 2"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,186,56,1)"}},"hoveron":"points","name":"2","legendgroup":"2","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4.9000000000000004,5,6,5.9000000000000004,5.5999999999999996,5.7999999999999998,6.5999999999999996,6.2999999999999998,5.7999999999999998,6.0999999999999996,5.0999999999999996,5.2999999999999998,5.5,5.2999999999999998,5.5,6.7000000000000002,6.9000000000000004,5.7000000000000002,6.7000000000000002,5.7000000000000002,6,5.5999999999999996,5.7999999999999998,6.0999999999999996,6.4000000000000004,5.5999999999999996,5.5999999999999996,6.0999999999999996,5.5999999999999996,5.5,5.4000000000000004,5.5999999999999996,5.0999999999999996,5.9000000000000004,5.7000000000000002,5.2000000000000002,5.2000000000000002,5.4000000000000004],"y":[1.5,1.7,2.5,2.1000000000000001,1.8,2.2000000000000002,2.1000000000000001,1.8,1.8,2.5,2,1.8999999999999999,2.1000000000000001,2.2999999999999998,1.8,2.2000000000000002,2.2999999999999998,2.2999999999999998,2,2.1000000000000001,1.8,2.1000000000000001,1.6000000000000001,1.8999999999999999,2,2.2000000000000002,1.3999999999999999,2.2999999999999998,2.3999999999999999,1.8,2.1000000000000001,2.3999999999999999,2.2999999999999998,2.2999999999999998,2.5,2.2999999999999998,2,2.2999999999999998],"text":["Petal.Length: 4.9<br />Petal.Width: 1.5<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.0<br />Petal.Width: 1.7<br />factor(kmeans_result$cluster): 3","Petal.Length: 6.0<br />Petal.Width: 2.5<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.9<br />Petal.Width: 2.1<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.6<br />Petal.Width: 1.8<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.8<br />Petal.Width: 2.2<br />factor(kmeans_result$cluster): 3","Petal.Length: 6.6<br />Petal.Width: 2.1<br />factor(kmeans_result$cluster): 3","Petal.Length: 6.3<br />Petal.Width: 1.8<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.8<br />Petal.Width: 1.8<br />factor(kmeans_result$cluster): 3","Petal.Length: 6.1<br />Petal.Width: 2.5<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.1<br />Petal.Width: 2.0<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.3<br />Petal.Width: 1.9<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.5<br />Petal.Width: 2.1<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.3<br />Petal.Width: 2.3<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.5<br />Petal.Width: 1.8<br />factor(kmeans_result$cluster): 3","Petal.Length: 6.7<br />Petal.Width: 2.2<br />factor(kmeans_result$cluster): 3","Petal.Length: 6.9<br />Petal.Width: 2.3<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.7<br />Petal.Width: 2.3<br />factor(kmeans_result$cluster): 3","Petal.Length: 6.7<br />Petal.Width: 2.0<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.7<br />Petal.Width: 2.1<br />factor(kmeans_result$cluster): 3","Petal.Length: 6.0<br />Petal.Width: 1.8<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.6<br />Petal.Width: 2.1<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.8<br />Petal.Width: 1.6<br />factor(kmeans_result$cluster): 3","Petal.Length: 6.1<br />Petal.Width: 1.9<br />factor(kmeans_result$cluster): 3","Petal.Length: 6.4<br />Petal.Width: 2.0<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.6<br />Petal.Width: 2.2<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.6<br />Petal.Width: 1.4<br />factor(kmeans_result$cluster): 3","Petal.Length: 6.1<br />Petal.Width: 2.3<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.6<br />Petal.Width: 2.4<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.5<br />Petal.Width: 1.8<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.4<br />Petal.Width: 2.1<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.6<br />Petal.Width: 2.4<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.1<br />Petal.Width: 2.3<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.9<br />Petal.Width: 2.3<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.7<br />Petal.Width: 2.5<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.2<br />Petal.Width: 2.3<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.2<br />Petal.Width: 2.0<br />factor(kmeans_result$cluster): 3","Petal.Length: 5.4<br />Petal.Width: 2.3<br />factor(kmeans_result$cluster): 3"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(97,156,255,1)"}},"hoveron":"points","name":"3","legendgroup":"3","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":44.493150684931507,"r":7.3059360730593621,"b":40.913242009132432,"l":43.105022831050235},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"K-Means Clustering of Iris Dataset","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.70499999999999996,7.1950000000000003],"tickmode":"array","ticktext":["2","4","6"],"tickvals":[2,4,6],"categoryorder":"array","categoryarray":["2","4","6"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Petal Length","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.01999999999999999,2.6200000000000001],"tickmode":"array","ticktext":["0.0","0.5","1.0","1.5","2.0","2.5"],"tickvals":[0,0.5,1,1.4999999999999998,2,2.5],"categoryorder":"array","categoryarray":["0.0","0.5","1.0","1.5","2.0","2.5"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Petal Width","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Cluster","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"867317bcdd67":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"867317bcdd67","visdat":{"867317bcdd67":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="model-selection" class="level1" data-number="15"><h1 data-number="15">
<span class="header-section-number">15</span> Model selection</h1>
<p>Since K-Means clustering has a random initialisation, it can produce different clustering outcomes. To improve the clustering results, the algorithm is run multiple times, and the best outcome is chosen based on the smallest total within-cluster sum of squares (SS):</p>
<p><span class="math display">\[SS=\sum_{i=1}^{k}\sum_{x\in C_i}^{}{\left \| x-\mu_i \right \|}^2\]</span></p>
<p>where k is the number of clusters, <span class="math inline">\(C_i\)</span> is the ith cluster, and <span class="math inline">\(\mu_i\)</span> is the centroid of the ith cluster. The formula calculates the sum of the squared distances between each data point in a cluster and its respective centroid.</p>
</section><section id="how-to-determine-the-number-of-clusters" class="level1" data-number="16"><h1 data-number="16">
<span class="header-section-number">16</span> How to determine the number of clusters</h1>
<p>Determining the appropriate number of clusters is an important step in the clustering process. One common approach is to use the elbow method, which involves running K-Means clustering with a range of values for k, and recording the total within-cluster sum of squares (WSS) for each value of k.</p>
<p>To implement the elbow method, we perform the following steps:</p>
<ul>
<li>Run k-means with <span class="math inline">\(k=1, k=2, \cdots, k=n\)</span>
</li>
<li>Record total within SS for each value of <span class="math inline">\(k\)</span>.</li>
<li>Choose <span class="math inline">\(k\)</span> at the elbow position, as illustrated below.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com">plotly</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Perform K-Means clustering with 3 clusters</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">ks</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span>
<span><span class="va">tot_within_ss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">ks</span>, <span class="kw">function</span><span class="op">(</span><span class="va">k</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/kmeans.html">kmeans</a></span><span class="op">(</span><span class="va">iris_data</span>, <span class="va">k</span>, nstart <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span>    <span class="va">cl</span><span class="op">$</span><span class="va">tot.withinss</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="va">km_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">ks</span>, <span class="va">tot_within_ss</span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">km_df</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ks</span>, y <span class="op">=</span> <span class="va">tot_within_ss</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Elbow Methods for K-Mean"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Number of clusters"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Total within-cluster sum of squares"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">2</span>, colour <span class="op">=</span> <span class="st">'blue'</span>, linetype <span class="op">=</span> <span class="st">'dotted'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-f25ab85bf888dc624719" style="width:100%;height:433px;"></div>
<script type="application/json" data-for="htmlwidget-f25ab85bf888dc624719">{"x":{"data":[{"x":[1,2,3,4,5],"y":[681.37059999999929,152.34795176035786,78.851441426145996,57.2284732142857,46.446182051282015],"text":["ks: 1<br />tot_within_ss: 681.37060","ks: 2<br />tot_within_ss: 152.34795","ks: 3<br />tot_within_ss:  78.85144","ks: 4<br />tot_within_ss:  57.22847","ks: 5<br />tot_within_ss:  46.44618"],"type":"scatter","mode":"lines+markers","line":{"width":1.8897637795275593,"color":"rgba(255,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":7.559055118110237,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"frame":null},{"x":[2,2],"y":[14.69996115384615,713.1168208974351],"text":"xintercept: 2","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,255,1)","dash":"dot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":44.493150684931507,"r":7.3059360730593621,"b":40.913242009132432,"l":43.105022831050235},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Elbow Methods for K-Mean","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.80000000000000004,5.2000000000000002],"tickmode":"array","ticktext":["1","2","3","4","5"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["1","2","3","4","5"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Number of clusters","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[14.69996115384615,713.1168208974351],"tickmode":"array","ticktext":["200","400","600"],"tickvals":[200,400,600],"categoryorder":"array","categoryarray":["200","400","600"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Total within-cluster sum of squares","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"867359b34453":{"x":{},"y":{},"type":"scatter"},"867384ad327":{"x":{},"y":{}},"8673686ca9b1":{"xintercept":{}}},"cur_data":"867359b34453","visdat":{"867359b34453":["function (y) ","x"],"867384ad327":["function (y) ","x"],"8673686ca9b1":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>One of the advantages of K-means clustering is its simplicity and ease of implementation. However, it also has some limitations, such as the sensitivity to the initial random placement of centroids, the need to specify the number of clusters in advance, and the inability to handle non-spherical clusters or clusters of varying sizes.</p>
<p>Despite these limitations, K-means clustering is widely used in various fields, such as marketing, image processing, and bioinformatics, among others. It is often used as a first step in more complex data analysis pipelines or as a baseline for comparison with other clustering algorithms.</p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/e2e-ds-r\.franckess\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./basic-unsupervised-learning.html" class="pagination-link" aria-label="Basics Of Unsupervised Learning">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Basics Of Unsupervised Learning</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./hier-clust.html" class="pagination-link" aria-label="Hierarchical Clustering">
        <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Hierarchical Clustering</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>End to End Data Science with R was written by Rene Essomba.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://www.github.com/franckess/QMD_E2E_DataScience_R/edit/main/k-means-clust.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://www.github.com/franckess/QMD_E2E_DataScience_R/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This book was built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>